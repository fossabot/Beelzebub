/**
 * THE FOLLOWING LICENSE ONLY APPLIES TO THE FIRST PART OF THE CODE
 *
 * Copyright (c) 2012 by Lukas Heidemann <lukasheidemann@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#include <screen.h>
#include <stdint.h>
#include <multiboot.h>
#include <ports.h>

uint32_t pitch;
uint8_t type, bypp;
uint16_t SCREEN_WIDTH;
uint16_t SCREEN_HEIGHT;
uintptr_t SCREEN_VIDEOMEM_PADDR;
uint32_t frameWidth, frameHeight;
uint16_t curX, curY;

#define vmem ((uint8_t *)SCREEN_VIDEOMEM_PADDR)
#define pixel(x, y) *((uint32_t *)(vmem + (x) * bypp + (y) * pitch))

void screen_write(const char *message, uint16_t x, uint16_t y)
{
	size_t i;
	size_t position = x + y * (pitch / bypp);

	for (i = 0; '\0' != message[i]; ++i)
	{
		if (y == 24)
			SCREEN_VIDEOMEM[position].attributes = SCREEN_ATTRIBUTES_PANIC;

		SCREEN_VIDEOMEM[position++].character = message[i];

		write_serial(COM1, message[i]);
	}
}

void screen_write_hex(uint64_t number, uint16_t x, uint16_t y)
{
	char string[17];
	string[16] = '\0';

	size_t i;
	for (i = 0; i < 16; ++i)
	{
		uint8_t nibble = (number >> (i * 4)) & 0xF;

		if (nibble >= 10)
			string[15 - i] = 'A' + (nibble - 10);
		else
			string[15 - i] = '0' + nibble;
	}

	screen_write(string, x, y);
}

/**
 * HERE THE FIRST PART END.
 * 
 * The font I am attempting to implement is "Free Pixel", obtained here:
 * http://www.dafont.com/free-pixel.font?fpp=100&l[]=10&l[]=1
 *
 * The lowercase letters have been implemented by my comrade Vaxe:
 * http://steamcommunity.com/id/sVaxe/
 *
 * The rest of the code is under the vLicense.
 */

#define NOCOL  (0x90011337)
#define INVCOL (0x42666616)
//	Immature? Maybe.

void draw_bitmap(const size_t x, const size_t y, const uint32_t colf, const uint32_t colb, const uint8_t * const bmp, const size_t w, const size_t h)
{
	size_t lx, ly;
	size_t line = SCREEN_VIDEOMEM_PADDR + y * pitch + x * bypp;

	for (ly = 0; ly < h; ++ly)
	{
		size_t ind = ly * w / 8, col = 0;

		for (lx = 0; lx < w; ++lx)
		{
			if (bmp[ind + lx / 8] & (0x80 >> lx))
			{
				if (colf == INVCOL)
					*((uint32_t *)(col + line)) = ~*((uint32_t *)(col + line));
				else if (colf != NOCOL)
					*((uint32_t *)(col + line)) = colf;
			}
			else if (colb != NOCOL)
				*((uint32_t *)(col + line)) = colb;

			col += bypp;
		}

		line += pitch;
	}
}

/**
 * Initializes the screen.
 **/
void screen_init()
{
	curX = curY = 0;

	switch (multiboot_info->framebuffer_type)
	{
		case MULTIBOOT_FRAMEBUFFER_TYPE_INDEXED:
			//	wat?
			break;

		case MULTIBOOT_FRAMEBUFFER_TYPE_EGA_TEXT:
			type = 0;
			SCREEN_VIDEOMEM_PADDR = multiboot_info->framebuffer_addr;
			SCREEN_WIDTH = multiboot_info->framebuffer_width;
			SCREEN_HEIGHT = multiboot_info->framebuffer_height;
			pitch = multiboot_info->framebuffer_pitch;
			bypp = (multiboot_info->framebuffer_bpp + 7) / 8;
			//	Rounds up the bpp to bytes per pixel.
			break;

		case MULTIBOOT_FRAMEBUFFER_TYPE_RGB:
			type = 1;
			SCREEN_VIDEOMEM_PADDR = multiboot_info->framebuffer_addr;
			frameWidth = multiboot_info->framebuffer_width;
			frameHeight = multiboot_info->framebuffer_height;
			pitch = multiboot_info->framebuffer_pitch;
			bypp = (multiboot_info->framebuffer_bpp + 7) / 8;

			SCREEN_WIDTH = frameWidth / FONT_WIDTH;
			SCREEN_HEIGHT = frameHeight / FONT_HEIGHT;
			break;
	}

	screen_clear();
}

/**
 * Clears the screen.
 */
void screen_clear()
{
	if (type == 0)
	{
		uint16_t x, y;
		for (y = 0; y < SCREEN_HEIGHT; ++y)
		for (x = 0; x < SCREEN_WIDTH; ++x)
		{
			vmem[x * bypp + y * pitch    ] = ' ';
			vmem[x * bypp + y * pitch + 1] = SCREEN_ATTRIBUTES;
		}
	}
	else if (type == 1)
	{
		uint16_t x, y;
		for (y = 0; y < frameHeight; ++y)
		for (x = 0; x < frameWidth; ++x)
		{
			*((uint32_t *)(vmem + x * bypp + y * pitch)) = 0;
		}
	}

	write_serial_str(COM1, "--- screen clear ---\r\n");
}

size_t write_vga(const char * const s)
{
	size_t i, pos, x = curX, y = curY;

	//	SPECIAL STRING
	if (s[0] == '-' && s[1] == '-' && s[2] == '-' && s[3] == '-' && s[4] == 0)
	{
		size_t ret = SCREEN_WIDTH - x;

		for (; x < SCREEN_WIDTH; x++)
			write_serial(COM1, vmem[x * bypp + y * pitch] = '-');

		curX = 0; ++curY;

		write_serial_str(COM1, "\r\n");

		return ret;
	}

	for (i = 0; '\0' != s[i]; ++i)
	{
		char c = s[i];
		pos = x * bypp + y * pitch;

		if (c == '\r')
			x = 0;
		else if (c == '\n')
			++y;
		else if (c == '\t')
			x = (x / 8 + 1) * 8;
		else if (c == '\b')
		{
			if (x > 0)
				--x;
		}
		else
		{
			if (x == SCREEN_WIDTH)
			{
				x = 0; y++;
			}

			if (y == 24)
				vmem[pos + 1] = SCREEN_ATTRIBUTES_PANIC;
			else
				vmem[pos + 1] = SCREEN_ATTRIBUTES;

			vmem[pos] = c;

			x++;
		}

		write_serial(COM1, c);
	}

	curX = x; curY = y;

	return i;
}

size_t write_vbe(const char * const s)
{
	size_t i, /*lx, ly,*/ x = curX, y = curY;

	if (s[0] == '-' && s[1] == '-' && s[2] == '-' && s[3] == '-' && s[4] == 0)
	{

	}

	for (i = 0; '\0' != s[i]; ++i)
	{
		char c = s[i];
		//size_t pos = x * bypp + y * pitch;
		size_t x2 = x * FONT_WIDTH, y2 = y * FONT_HEIGHT;

		if (c == '\r')
			x = 0;
		else if (c == '\n')
			++y;
		else if (c == '\t')
			x = (x / 8 + 1) * 8;
		else if (c == '\b')
		{
			if (x > 0)
				--x;
		}
		else if (c == ' ')
			++x;
		else if (c >= FONT_MIN && c <= FONT_MAX)
		{
			if (x == SCREEN_WIDTH)
			{     x = 0; y++;    }

			draw_bitmap(x2, y2, INVCOL, NOCOL, font[c - FONT_MIN], FONT_WIDTH, FONT_HEIGHT);

			/*for (ly = 0; ly < FONT_HEIGHT; ++ly)
			for (lx = 0; lx < FONT_WIDTH; ++lx)
			{
				if (font[c - FONT_MIN][ly] & (0x80 >> lx))
					pixel(x2 + lx, y2 + ly) = ~(pixel(x2 + lx, y2 + ly));
			}//*/

			//vmem[pos] = c;

			++x;
		}

		write_serial(COM1, c);
	}

	curX = x; curY = y;

	return i;
}

size_t puts(const char * const s)
{
	if (type == 0)
		return write_vga(s);
	else if (type == 1)
		return write_vbe(s);

	return ~((size_t)0);
}



uint8_t font[][14] = {
	{   //   33 | 0x21 | !
		b(00000000),
		b(00000000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00000000),
	},
	{   //   34 | 0x22 | "
		b(00000000),
		b(01100110),
		b(01100110),
		b(01100110),
		b(01100110),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   35 | 0x23 | #
		b(00000000),
		b(00000000),
		b(00100100),
		b(00100100),
		b(01111110),
		b(00100100),
		b(00100100),
		b(00100100),
		b(00100100),
		b(01111110),
		b(00100100),
		b(00100100),
		b(00000000),
		b(00000000),
	},
	{   //   36 | 0x24 | $
		b(00000000),
		b(00010000),
		b(01111100),
		b(10010010),
		b(10010000),
		b(10010000),
		b(01111100),
		b(00010010),
		b(00010010),
		b(00010010),
		b(10010010),
		b(01111100),
		b(00010000),
		b(00000000),
	},
	{   //   37 | 0x25 | %
		b(00000000),
		b(00000000),
		b(01100000),
		b(10010000),
		b(10010010),
		b(01100100),
		b(00001000),
		b(00010000),
		b(00100000),
		b(01001100),
		b(10010010),
		b(00010010),
		b(00001100),
		b(00000000),
	},
	{   //   38 | 0x26 | &
		b(00000000),
		b(00000000),
		b(00011000),
		b(00100100),
		b(00100100),
		b(00011000),
		b(00110000),
		b(01001010),
		b(01001010),
		b(01000100),
		b(01000100),
		b(00111010),
		b(00000000),
		b(00000000),
	},
	{   //   39 | 0x27 | '
		b(00000000),
		b(00000000),
		b(00110000),
		b(00110000),
		b(00110000),
		b(00110000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   40 | 0x28 | (
		b(00000000),
		b(00001000),
		b(00010000),
		b(00010000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00010000),
		b(00010000),
		b(00001000),
		b(00000000),
	},
	{   //   41 | 0x29 | )
		b(00000000),
		b(00100000),
		b(00010000),
		b(00010000),
		b(00001000),
		b(00001000),
		b(00001000),
		b(00001000),
		b(00001000),
		b(00001000),
		b(00010000),
		b(00010000),
		b(00100000),
		b(00000000),
	},
	{   //   42 | 0x2A | *
		b(00000000),
		b(00000000),
		b(00010000),
		b(01010100),
		b(00111000),
		b(01010100),
		b(00010000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   43 | 0x2B | +
		b(00000000),
		b(00000000),
		b(00000000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(11111110),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   44 | 0x2C | ,
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00011000),
		b(00011000),
		b(00011000),
		b(00110000),
		b(00000000),
	},
	{   //   45 | 0x2D | -
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(11111110),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   46 | 0x2E | .
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00011000),
		b(00011000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   47 | 0x2F | /
		b(00000000),
		b(00000010),
		b(00000010),
		b(00000100),
		b(00000100),
		b(00001000),
		b(00001000),
		b(00010000),
		b(00010000),
		b(00100000),
		b(00100000),
		b(01000000),
		b(01000000),
		b(00000000),
	},
	{   //   48 | 0x30 | 0
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000010),
		b(01000110),
		b(01001010),
		b(01010010),
		b(01100010),
		b(01000010),
		b(01000010),
		b(00111100),
		b(00000000),
		b(00000000),
	},
	{   //   49 | 0x31 | 1
		b(00000000),
		b(00000000),
		b(00010000),
		b(00110000),
		b(01010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(01111100),
		b(00000000),
		b(00000000),
	},
	{   //   50 | 0x32 | 2
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000010),
		b(00000010),
		b(00000100),
		b(00001000),
		b(00010000),
		b(00100000),
		b(01000000),
		b(01111110),
		b(00000000),
		b(00000000),
	},
	{   //   51 | 0x33 | 3
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(00000010),
		b(00000100),
		b(00011000),
		b(00000100),
		b(00000010),
		b(00000010),
		b(01000100),
		b(00111000),
		b(00000000),
		b(00000000),
	},
	{   //   52 | 0x34 | 4
		b(00000000),
		b(00000000),
		b(00001100),
		b(00010100),
		b(00010100),
		b(00100100),
		b(00100100),
		b(01000100),
		b(01111110),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000000),
		b(00000000),
	},
	{   //   53 | 0x35 | 5
		b(00000000),
		b(00000000),
		b(01111110),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01111100),
		b(00000010),
		b(00000010),
		b(00000010),
		b(01000010),
		b(00111100),
		b(00000000),
		b(00000000),
	},
	{   //   54 | 0x36 | 6
		b(00000000),
		b(00000000),
		b(00011100),
		b(00100000),
		b(01000000),
		b(01000000),
		b(01011100),
		b(01100010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(00111100),
		b(00000000),
		b(00000000),
	},
	{   //   55 | 0x37 | 7
		b(00000000),
		b(00000000),
		b(01111110),
		b(01000010),
		b(00000010),
		b(00000100),
		b(00000100),
		b(00001000),
		b(00001000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00000000),
	},
	{   //   56 | 0x38 | 8
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000010),
		b(00100100),
		b(00011000),
		b(00100100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(00111100),
		b(00000000),
		b(00000000),
	},
	{   //   57 | 0x39 | 9
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000110),
		b(00111010),
		b(00000010),
		b(00000010),
		b(00000100),
		b(00111000),
		b(00000000),
		b(00000000),
	},
	{   //   58 | 0x3A | :
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00011000),
		b(00011000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00011000),
		b(00011000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   59 | 0x3B | ;
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00011000),
		b(00011000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00011000),
		b(00011000),
		b(00011000),
		b(00110000),
		b(00000000),
	},
	{   //   60 | 0x3C | <
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000100),
		b(00001000),
		b(00010000),
		b(00100000),
		b(00010000),
		b(00001000),
		b(00000100),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   61 | 0x3D | =
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(01111110),
		b(00000000),
		b(01111110),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   62 | 0x3E | >
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00100000),
		b(00010000),
		b(00001000),
		b(00000100),
		b(00001000),
		b(00010000),
		b(00100000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   63 | 0x3F | ?
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000010),
		b(00000010),
		b(00000100),
		b(00001000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00010000),
		b(00000000),
		b(00000000),
	},
	{   //   64 | 0x40 | @
		b(00000000),
		b(00000000),
		b(00111000),
		b(01000100),
		b(01000010),
		b(10011010),
		b(10101010),
		b(10101010),
		b(10101010),
		b(10010100),
		b(01000000),
		b(01000100),
		b(00111000),
		b(00000000),
	},
	{   //   65 | 0x41 | A
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01111110),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(00000000),
		b(00000000),
	},
	{   //   66 | 0x42 | B
		b(00000000),
		b(00000000),
		b(01111100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01111100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01111100),
		b(00000000),
		b(00000000),
	},
	{   //   67 | 0x43 | C
		b(00000000),
		b(00000000),
		b(00011100),
		b(00100010),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(00100010),
		b(00011100),
		b(00000000),
		b(00000000),
	},
	{   //   68 | 0x44 | D
		b(00000000),
		b(00000000),
		b(01111000),
		b(01000100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000100),
		b(01111000),
		b(00000000),
		b(00000000),
	},
	{   //   69 | 0x45 | E
		b(00000000),
		b(00000000),
		b(01111110),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01111100),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01111110),
		b(00000000),
		b(00000000),
	},
	{   //   70 | 0x46 | F
		b(00000000),
		b(00000000),
		b(01111110),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01111100),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(00000000),
		b(00000000),
	},
	{   //   71 | 0x47 | G
		b(00000000),
		b(00000000),
		b(00011100),
		b(00100010),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000110),
		b(01000010),
		b(00100010),
		b(00011110),
		b(00000000),
		b(00000000),
	},
	{   //   72 | 0x48 | H
		b(00000000),
		b(00000000),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01111110),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(00000000),
		b(00000000),
	},
	{   //   73 | 0x49 | I
		b(00000000),
		b(00000000),
		b(01111100),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(01111100),
		b(00000000),
		b(00000000),
	},
	{   //   74 | 0x4A | J
		b(00000000),
		b(00000000),
		b(00011110),
		b(00000010),
		b(00000010),
		b(00000010),
		b(00000010),
		b(00000010),
		b(00000010),
		b(00000010),
		b(01000100),
		b(00111000),
		b(00000000),
		b(00000000),
	},
	{   //   75 | 0x4B | K
		b(00000000),
		b(00000000),
		b(01000010),
		b(01000100),
		b(01001000),
		b(01010000),
		b(01100000),
		b(01100000),
		b(01010000),
		b(01001000),
		b(01000100),
		b(01000010),
		b(00000000),
		b(00000000),
	},
	{   //   76 | 0x4C | L
		b(00000000),
		b(00000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01111110),
		b(00000000),
		b(00000000),
	},
	{   //   77 | 0x4D | M
		b(00000000),
		b(00000000),
		b(10000010),
		b(10000010),
		b(11000110),
		b(11000110),
		b(10101010),
		b(10101010),
		b(10010010),
		b(10010010),
		b(10000010),
		b(10000010),
		b(00000000),
		b(00000000),
	},
	{   //   78 | 0x4E | N
		b(00000000),
		b(00000000),
		b(01000010),
		b(01000010),
		b(01100010),
		b(01010010),
		b(01010010),
		b(01001010),
		b(01001010),
		b(01000110),
		b(01000010),
		b(01000010),
		b(00000000),
		b(00000000),
	},
	{   //   79 | 0x4F | O
		b(00000000),
		b(00000000),
		b(00011000),
		b(00100100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(00100100),
		b(00011000),
		b(00000000),
		b(00000000),
	},
	{   //   80 | 0x50 | P
		b(00000000),
		b(00000000),
		b(01111100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01111100),
		b(01000000),
		b(01000000),
		b(01000000),
		b(01000000),
		b(00000000),
		b(00000000),
	},
	{   //   81 | 0x51 | Q
		b(00000000),
		b(00000000),
		b(00011000),
		b(00100100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01001010),
		b(00100100),
		b(00011010),
		b(00000000),
		b(00000000),
	},
	{   //   82 | 0x52 | R
		b(00000000),
		b(00000000),
		b(01111100),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01111100),
		b(01001000),
		b(01000100),
		b(01000100),
		b(01000010),
		b(00000000),
		b(00000000),
	},
	{   //   83 | 0x53 | S
		b(00000000),
		b(00000000),
		b(00111100),
		b(01000010),
		b(01000000),
		b(01000000),
		b(00111100),
		b(00000010),
		b(00000010),
		b(00000010),
		b(01000010),
		b(00111100),
		b(00000000),
		b(00000000),
	},
	{   //   84 | 0x54 | T
		b(00000000),
		b(00000000),
		b(11111110),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00000000),
	},
	{   //   85 | 0x55 | U
		b(00000000),
		b(00000000),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(01000010),
		b(00111100),
		b(00000000),
		b(00000000),
	},
	{   //   86 | 0x56 | V
		b(00000000),
		b(00000000),
		b(10000010),
		b(10000010),
		b(10000010),
		b(01000100),
		b(01000100),
		b(01000100),
		b(00101000),
		b(00101000),
		b(00101000),
		b(00010000),
		b(00000000),
		b(00000000),
	},
	{   //   87 | 0x57 | W
		b(00000000),
		b(00000000),
		b(10000010),
		b(10000010),
		b(10000010),
		b(10000010),
		b(10010010),
		b(10010010),
		b(10101010),
		b(10101010),
		b(01000100),
		b(01000100),
		b(00000000),
		b(00000000),
	},
	{   //   88 | 0x58 | X
		b(00000000),
		b(00000000),
		b(01000010),
		b(01000010),
		b(00100100),
		b(00100100),
		b(00011000),
		b(00011000),
		b(00100100),
		b(00100100),
		b(01000010),
		b(01000010),
		b(00000000),
		b(00000000),
	},
	{   //   89 | 0x59 | Y
		b(00000000),
		b(00000000),
		b(10000010),
		b(10000010),
		b(01000100),
		b(01000100),
		b(00101000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00000000),
		b(00000000),
	},
	{   //   90 | 0x5A | Z
		b(00000000),
		b(00000000),
		b(01111110),
		b(00000010),
		b(00000010),
		b(00000100),
		b(00001000),
		b(00010000),
		b(00100000),
		b(01000000),
		b(01000000),
		b(01111110),
		b(00000000),
		b(00000000),
	},
	{   //   91 | 0x5B | [
		b(00000000),
		b(00111100),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00100000),
		b(00111100),
		b(00000000),
	},
	{   //   92 | 0x5C | \ (BACKSLASH)
		b(00000000),
		b(01000000),
		b(01000000),
		b(00100000),
		b(00100000),
		b(00010000),
		b(00010000),
		b(00001000),
		b(00001000),
		b(00000100),
		b(00000100),
		b(00000010),
		b(00000010),
		b(00000000),
	},
	{   //   93 | 0x5D | ]
		b(00000000),
		b(00111100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00000100),
		b(00111100),
		b(00000000),
	},
	{   //   94 | 0x5E | ^
		b(00000000),
		b(00010000),
		b(00101000),
		b(01000100),
		b(10000010),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   95 | 0x5F | _
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(11111111),
		b(00000000),
		b(00000000),
	},
	{   //   96 | 0x60 | `
		b(00000000),
		b(00010000),
		b(00010000),
		b(00001000),
		b(00001000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //   97 | 0x61 | a
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00011100), /*  3 */
		b(00100010), /*  4 */
		b(00000010), /*  5 */
		b(00111110), /*  6 */
		b(01000010), /*  7 */
		b(01000110), /*  8 */
		b(00111010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //   98 | 0x62 | b
		b(01000000), /*  0 */
		b(01000000), /*  1 */
		b(01000000), /*  2 */
		b(01000000), /*  3 */
		b(01011100), /*  4 */
		b(01100010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000010), /*  8 */
		b(01111100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //   99 | 0x63 | c
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00111100), /*  3 */
		b(01000010), /*  4 */
		b(01000000), /*  5 */
		b(01000000), /*  6 */
		b(01000000), /*  7 */
		b(01000010), /*  8 */
		b(00111100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  100 | 0x64 | d
		b(00000010), /*  0 */
		b(00000010), /*  1 */
		b(00000010), /*  2 */
		b(00111110), /*  3 */
		b(01000010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000110), /*  8 */
		b(00111010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  101 | 0x65 | e
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00111100), /*  3 */
		b(01000010), /*  4 */
		b(01000010), /*  5 */
		b(01111110), /*  6 */
		b(01000000), /*  7 */
		b(01000000), /*  8 */
		b(00111100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  102 | 0x66 | f
		b(00001110), /*  0 */
		b(00010000), /*  1 */
		b(00010000), /*  2 */
		b(01111100), /*  3 */
		b(00010000), /*  4 */
		b(00010000), /*  5 */
		b(00010000), /*  6 */
		b(00010000), /*  7 */
		b(00010000), /*  8 */
		b(00010000), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  103 | 0x67 | g
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00111010), /*  3 */
		b(01000110), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000110), /*  8 */
		b(00111010), /*  9 */
		b(00000010), /* 10 */
		b(01000010), /* 11 */
		b(00111100), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  104 | 0x68 | h
		b(01000000), /*  0 */
		b(01000000), /*  1 */
		b(01000000), /*  2 */
		b(01011100), /*  3 */
		b(01100010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000010), /*  8 */
		b(01000010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  105 | 0x69 | i
		b(00000000), /*  0 */
		b(00010000), /*  1 */
		b(00000000), /*  2 */
		b(01110000), /*  3 */
		b(00010000), /*  4 */
		b(00010000), /*  5 */
		b(00010000), /*  6 */
		b(00010000), /*  7 */
		b(00010000), /*  8 */
		b(01111100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  106 | 0x6A | j
		b(00000000), /*  0 */
		b(00000100), /*  1 */
		b(00000000), /*  2 */
		b(00111100), /*  3 */
		b(00000100), /*  4 */
		b(00000100), /*  5 */
		b(00000100), /*  6 */
		b(00000100), /*  7 */
		b(00000100), /*  8 */
		b(00000100), /*  9 */
		b(00000100), /* 10 */
		b(01000100), /* 11 */
		b(00111000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  107 | 0x6B | k
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(01000000), /*  2 */
		b(01000010), /*  3 */
		b(01000100), /*  4 */
		b(01001000), /*  5 */
		b(01110000), /*  6 */
		b(01001000), /*  7 */
		b(01000100), /*  8 */
		b(01000010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  108 | 0x6C | l
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(01000000), /*  2 */
		b(01100000), /*  3 */
		b(00100000), /*  4 */
		b(00100000), /*  5 */
		b(00100000), /*  6 */
		b(00100000), /*  7 */
		b(00100000), /*  8 */
		b(00011100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  109 | 0x6D | d
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(11101100), /*  3 */
		b(10010010), /*  4 */
		b(10010010), /*  5 */
		b(10010010), /*  6 */
		b(10010010), /*  7 */
		b(10010010), /*  8 */
		b(10010010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  110 | 0x6E | n
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01011100), /*  3 */
		b(01100010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000010), /*  8 */
		b(01000010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  111 | 0x6F| o
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00111100), /*  3 */
		b(01000010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000010), /*  8 */
		b(00111100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  112 | 0x70 | p
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01011100), /*  3 */
		b(01100010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000010), /*  8 */
		b(01111100), /*  9 */
		b(01000000), /* 10 */
		b(01000000), /* 11 */
		b(01000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  113 | 0x71 | q
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00111110), /*  3 */
		b(01000010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000010), /*  8 */
		b(00111010), /*  9 */
		b(00000010), /* 10 */
		b(00000010), /* 11 */
		b(00000010), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  114 | 0x72 | r
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01011100), /*  3 */
		b(01100010), /*  4 */
		b(01000000), /*  5 */
		b(01000000), /*  6 */
		b(01000000), /*  7 */
		b(01000000), /*  8 */
		b(01000000), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  115 | 0x73 | s
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(00111100), /*  3 */
		b(01000010), /*  4 */
		b(01000000), /*  5 */
		b(00111100), /*  6 */
		b(00000010), /*  7 */
		b(01000010), /*  8 */
		b(00111100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  116 | 0x74 | t
		b(00010000), /*  0 */
		b(00010000), /*  1 */
		b(00010000), /*  2 */
		b(01111110), /*  3 */
		b(00010000), /*  4 */
		b(00010000), /*  5 */
		b(00010000), /*  6 */
		b(00010000), /*  7 */
		b(00010000), /*  8 */
		b(00001110), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  117 | 0x75 | u
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01000010), /*  3 */
		b(01000010), /*  4 */
		b(01000010), /*  5 */
		b(01000010), /*  6 */
		b(01000010), /*  7 */
		b(01000110), /*  8 */
		b(00111010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  118 | 0x76 | v
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01000010), /*  3 */
		b(01000010), /*  4 */
		b(01000010), /*  5 */
		b(00100100), /*  6 */
		b(00100100), /*  7 */
		b(00100100), /*  8 */
		b(00011000), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  119 | 0x77 | w
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(10000010), /*  3 */
		b(10000010), /*  4 */
		b(10010010), /*  5 */
		b(10010010), /*  6 */
		b(10101010), /*  7 */
		b(01000100), /*  8 */
		b(01000100), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  120 | 0x78 | x
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01000010), /*  3 */
		b(01000010), /*  4 */
		b(00100100), /*  5 */
		b(00011000), /*  6 */
		b(00100100), /*  7 */
		b(01000010), /*  8 */
		b(01000010), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  121 | 0x79 | y
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01000010), /*  3 */
		b(01000010), /*  4 */
		b(00100010), /*  5 */
		b(00100100), /*  6 */
		b(00010100), /*  7 */
		b(00010100), /*  8 */
		b(00001000), /*  9 */
		b(00001000), /* 10 */
		b(00001000), /* 11 */
		b(00110000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  122 | 0x7A | z
		b(00000000), /*  0 */
		b(00000000), /*  1 */
		b(00000000), /*  2 */
		b(01111110), /*  3 */
		b(00000010), /*  4 */
		b(00000100), /*  5 */
		b(00001000), /*  6 */
		b(00010000), /*  7 */
		b(00100000), /*  8 */
		b(01111110), /*  9 */
		b(00000000), /* 10 */
		b(00000000), /* 11 */
		b(00000000), /* 12 */
		b(00000000), /* 13 */
	},
	{   //  123 | 0x78 | {
		b(00000000),
		b(00001100),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(01100000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00001100),
	},
	{   //  124 | 0x78 | |
		b(00000000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00000000),
	},
	{   //  125 | 0x7D | }
		b(00000000),
		b(01100000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00001100),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(00010000),
		b(01100000),
	},
	{   //  126 | 0x7E | ~
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00110010),
		b(01001100),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},
	{   //  127 | 0x7F | DEL
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
		b(00000000),
	},

};

